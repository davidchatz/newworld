{
    "Comment": "A description of my state machine",
    "StartAt": "Interator",
    "States": {
      "Interator": {
        "Type": "Map",
        "ItemProcessor": {
          "ProcessorConfig": {
            "Mode": "DISTRIBUTED",
            "ExecutionType": "STANDARD"
          },
          "StartAt": "PostMsg",
          "States": {
            "PostMsg": {
              "Type": "Task",
              "Resource": "arn:aws:states:::http:invoke",
              "Parameters": {
                "ApiEndpoint.$": "$.BatchInput.post",
                "Method": "POST",
                "RequestBody": {
                  "content.$": "$"
                },
                "Headers": {
                  "Content-Type": "application/json"
                },
                "Authentication": {
                  "ConnectionArn": "${DiscordConnection}"
                }
              },
              "Retry": [
                {
                  "ErrorEquals": [
                    "States.ALL"
                  ],
                  "BackoffRate": 2,
                  "IntervalSeconds": 1,
                  "MaxAttempts": 3,
                  "JitterStrategy": "FULL"
                }
              ],
              "End": true
            }
          }
        },
        "End": true,
        "MaxConcurrency": 1,
        "Label": "Interator",
        "ItemBatcher": {
          "MaxItemsPerBatch": 15,
          "BatchInput": {
            "post.$": "$.post"
          }
        },
        "ItemsPath": "$.table"
      }
    }
  }